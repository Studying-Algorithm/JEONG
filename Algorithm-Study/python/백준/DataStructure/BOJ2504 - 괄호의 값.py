# ë°±ì¤€ 2504 ê´„í˜¸ì˜ ê°’ https://www.acmicpc.net/problem/2504

'''
[ğŸ“Œ ë¶„ì„]
1. (), []ëŠ” ìŒì´ í•­ìƒ ë§ì•„ì•¼ í•œë‹¤. ë§ì§€ ì•ŠëŠ”ë‹¤ë©´ 0 ì¶œë ¥
2. ( ì™€ [ ë‹¤ìŒ ìŒì´ ë§ì§€ ì•ŠëŠ”ë‹¤ë©´ ê³±í•´ì§€ê²Œ ëœë‹¤ )ì™€ ]ê°€ ë‚˜ì˜¤ê¸° ì „ê¹Œì§€
3. ë°”ë¡œ ë’¤ì— )ì™€ ]ê°€ ë‚˜ì˜¤ë©´ ë”í•˜ê¸°ê°€ ëœë‹¤
4. ê³„ì† ë°˜ë³µí•˜ê²Œ ëœë‹¤

- ë”í•˜ê¸° êµ¬í˜„ì„ ì–´ë–»ê²Œ í•´ì•¼ í•˜ëŠ”ì§€?
- ìŒì´ ë§ì§€ ì•ŠëŠ” ê²½ìš°ë„ ê³ ë ¤ ex. )(
- tempë¥¼ ì‚¬ìš©í•´ ê°€ì¤‘ì¹˜ë¥¼ ê³±í•˜ê±°ë‚˜ ë”í•´ì¤Œ

[âœ… í’€ì´]
- temp ë³€ìˆ˜ë¥¼ ì´ìš©í•´ ê°€ì¤‘ì¹˜ë¥¼ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤.
- (ì™€ [ê°€ ë‚˜ì™”ì„ ì‹œ ê°€ì¤‘ì¹˜ì— ê°’ì„ ê³±í•´ì£¼ê³ , ë§Œì•½ ìŠ¤íƒì´ ë¹„ì–´ìˆê±°ë‚˜ ê´„í˜¸ì˜ ê°’ì´ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì¢…ë£Œ
- ë§Œì•½ ì§ì„ ì°¾ì•˜ì„ ì‹œì—ëŠ” resultì— í˜„ì¬ ê°€ì¤‘ì¹˜ë¥¼ ë”í•´ì¤€ ì´í›„ stackì—ì„œ pop, ê·¸ë¦¬ê³  ê°€ì¤‘ì¹˜ë„ ì œê±°í•´ì¤ë‹ˆë‹¤.
- ë§Œì•½ ë°˜ë³µë¬¸ì´ ì¢…ë£Œë˜ì—ˆëŠ”ë° stackì— ë‚¨ì•„ìˆëŠ” ê´„í˜¸ê°€ ìˆì„ ê²½ìš° ì§ì´ ë§ì§€ ì•ŠëŠ” ê²½ìš°ì´ë¯€ë¡œ 0 ë¦¬í„´
'''


import sys

input = sys.stdin.readline

brackets = input().strip()
stack = []
result = 0
temp = 1

for i in range(len(brackets)):
    if brackets[i] == '(':
        stack.append('(')
        temp *= 2
    elif brackets[i] == '[':
        stack.append('[')
        temp *= 3
    elif brackets[i] == ')':
        if not stack or stack[-1] == '[':
            result = 0
            break
        if brackets[i-1] == '(':
            result += temp
        stack.pop()
        temp //= 2

    elif brackets[i] == ']':
        if not stack or stack[-1] == '(':
            result = 0
            break
        if brackets[i - 1] == '[':
            result += temp
        stack.pop()
        temp //= 3

if stack:
    result = 0

print(result)